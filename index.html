<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Papyonu Bulma Oyunu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden; 
        }

        #game-container {
            position: relative;
        }
        
        /* DÜZENLEME: Grid sistemi mobil için basitleştirildi */
        #button-grid {
            display: grid;
            position: relative;
        }
        
        .game-button {
            position: relative;
            overflow: hidden;
            border: 2px solid theme('colors.gray.700');
            transition: transform 0.2s ease-in-out;
        }

        .button-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: transform 0.3s ease-in-out;
            object-fit: cover;
        }

        .content-hidden {
            transform: scale(0);
        }

        .content-visible {
            transform: scale(1);
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center p-4">
    <div id="game-container" class="relative w-full max-w-sm h-auto bg-gray-800 rounded-2xl shadow-lg p-6 flex flex-col justify-center">
        
        <div class="text-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-amber-400">Papyonu Bulma Oyunu</h1>
            <p class="text-xs sm:text-sm text-gray-400 mt-1">Doğru papyonu bulmak için butonlara tıkla!</p>
        </div>

        <div id="button-grid" class="w-full grid grid-cols-2 gap-0.5 place-items-center">
            </div>

        <div id="win-message" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-20">
            <div class="bg-green-500 text-white text-center text-3xl sm:text-4xl font-extrabold p-8 rounded-xl shadow-2xl">
                Kazandın! Doğru Papyonu Buldun!
                <div class="flex justify-center mt-4">
                    <a href="#" id="win-link" class="px-6 py-3 bg-white text-green-500 font-bold rounded-full text-xl hover:bg-gray-200 flex items-center justify-center">
                      Linki Aç
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        window.onload = function() {
            const buttonGrid = document.getElementById('button-grid');
            const winMessage = document.getElementById('win-message');
            const winLinkButton = document.getElementById('win-link');

            const totalButtons = 4; 
            const hiddenImageUrl = 'https://placehold.co/200x200/38bdf8/ffffff?text=Gizli'; 
            const correctImageUrl = 'https://placehold.co/200x200/4CAF50/ffffff?text=Doğru+Papyon'; 
            
            const wrongImageUrls = [
                'https://placehold.co/200x200/A00000/ffffff?text=Yanlış-1','https://placehold.co/200x200/D00000/ffffff?text=Yanlış-2',
                'https://placehold.co/200x200/E00000/ffffff?text=Yanlış-3','https://placehold.co/200x200/F00000/ffffff?text=Yanlış-4',
                'https://placehold.co/200x200/A05000/ffffff?text=Yanlış-5','https://placehold.co/200x200/B06000/ffffff?text=Yanlış-6',
                'https://placehold.co/200x200/C07000/ffffff?text=Yanlış-7','https://placehold.co/200x200/D08000/ffffff?text=Yanlış-8',
                'https://placehold.co/200x200/A0A000/ffffff?text=Yanlış-9','https://placehold.co/200x200/B0B000/ffffff?text=Yanlış-10',
                'https://placehold.co/200x200/C0C000/ffffff?text=Yanlış-11','https://placehold.co/200x200/D0D000/ffffff?text=Yanlış-12',
                'https://placehold.co/200x200/00A000/ffffff?text=Yanlış-13','https://placehold.co/200x200/00B000/ffffff?text=Yanlış-14',
                'https://placehold.co/200x200/00C000/ffffff?text=Yanlış-15','https://placehold.co/200x200/00D000/ffffff?text=Yanlış-16',
                'https://placehold.co/200x200/00A0A0/ffffff?text=Yanlış-17','https://placehold.co/200x200/00B0B0/ffffff?text=Yanlış-18',
                'https://placehold.co/200x200/00C0C0/ffffff?text=Yanlış-19','https://placehold.co/200x200/00D0D0/ffffff?text=Yanlış-20'
            ];
            
            const buttonColors = ['bg-red-500', 'bg-blue-500', 'bg-green-500', 'bg-purple-500'];
            
            let isGameOver = false;
            let isAnimating = false;
            // DÜZENLEME: clickCount mantığı geri getirildi.
            let clickCount = 0; 
            let wrongImageAssignment = []; 

            function resetGame() {
                isGameOver = false;
                isAnimating = false;
                // DÜZENLEME: clickCount sıfırlanıyor.
                clickCount = 0;
                winMessage.classList.add('hidden');
                wrongImageAssignment = [...wrongImageUrls];
                shuffleArray(wrongImageAssignment);
                createButtons();
                shufflePositions();
            }

            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }
            
            function shufflePositions() {
                const buttons = Array.from(buttonGrid.children);
                if (buttons.length === 0) return;

                const initialPositions = buttons.map(button => button.getBoundingClientRect());
                const shuffledButtons = [...buttons];
                shuffleArray(shuffledButtons);
                
                shuffledButtons.forEach(button => buttonGrid.appendChild(button));
                const finalPositions = buttons.map(button => button.getBoundingClientRect());

                buttons.forEach((button, index) => {
                    const originalButtonOrder = buttons.findIndex(b => b === shuffledButtons[index]);
                    const deltaX = initialPositions[originalButtonOrder].left - finalPositions[index].left;
                    const deltaY = initialPositions[originalButtonOrder].top - finalPositions[index].top;

                    button.style.transition = 'none';
                    // DÜZELTME: Yazım hatası düzeltildi.
                    button.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
                    
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            button.style.transition = 'transform 0.2s ease-in-out';
                            button.style.transform = '';
                        });
                    });
                });
            }

            function createButtons() {
                buttonGrid.innerHTML = '';
                
                for (let i = 0; i < totalButtons; i++) {
                    const button = document.createElement('button');
                    button.classList.add(
                        'game-button', buttonColors[i % buttonColors.length],
                        'text-4xl', 'font-bold', 'text-white', 'p-4', 'rounded-xl', 'shadow-md',
                        'transition-colors', 'duration-150', 'ease-in-out',
                        'aspect-square', 'w-full'
                    );
                    button.dataset.buttonIndex = i;
                    
                    const hiddenImage = document.createElement('img');
                    hiddenImage.src = hiddenImageUrl;
                    hiddenImage.classList.add('button-content', 'content-visible'); 
                    button.appendChild(hiddenImage);

                    const revealedImage = document.createElement('img');
                    revealedImage.src = wrongImageAssignment[i];
                    revealedImage.classList.add('button-content', 'content-hidden'); 
                    button.appendChild(revealedImage);
                    
                    buttonGrid.appendChild(button);
                }
            }

            function revealButton(button, imageUrl, isCorrect) {
                 const hiddenImage = button.querySelector('.content-visible');
                 const revealedImage = button.querySelector('.content-hidden');
                 
                 revealedImage.src = imageUrl;

                 if (hiddenImage) hiddenImage.classList.replace('content-visible', 'content-hidden');
                 if (revealedImage) revealedImage.classList.replace('content-hidden', 'content-visible');
                 
                 if (isCorrect) {
                     winMessage.classList.remove('hidden');
                     isGameOver = true;
                     isAnimating = false;
                 } else {
                    setTimeout(() => {
                        if (revealedImage) revealedImage.classList.replace('content-visible', 'content-hidden');
                        if (hiddenImage) hiddenImage.classList.replace('content-hidden', 'content-visible');
                        
                        setTimeout(() => {
                            isAnimating = false;
                            if (!isGameOver) {
                                shufflePositions();
                            }
                        }, 200);

                    }, 500);
                 }
            }

            buttonGrid.addEventListener('click', (event) => {
                if (isGameOver || isAnimating) return;
                
                const clickedButton = event.target.closest('button');
                if (!clickedButton) return;
                
                isAnimating = true;
                // DÜZENLEME: Kazanma mantığı clickCount'a göre çalışıyor.
                clickCount++;

                if (clickCount === 49) {
                    revealButton(clickedButton, correctImageUrl, true);
                } else {
                    const buttonIndex = parseInt(clickedButton.dataset.buttonIndex);
                    const assignedWrongImage = wrongImageAssignment[buttonIndex];
                    revealButton(clickedButton, assignedWrongImage, false);
                }
            });

            resetGame();
        };
    </script>
</body>
</html>
