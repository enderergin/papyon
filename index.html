<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Papyonu Bulma Oyunu</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    body {
        font-family: 'Inter', sans-serif;
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
    }
    #button-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(128px, 1fr));
        gap-x: 4px; /* yatay boşluk */
        gap-y: 0px; /* dikey boşluk tamamen kaldırıldı */
    }
    .game-button {
        position: relative;
        overflow: hidden;
        border: 2px solid #444;
        transition: transform 0.2s ease-in-out;
    }
    .button-content {
        position: absolute;
        top: 0; left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease-in-out;
    }
    .hidden-content {
        transform: scale(0);
    }
    .revealed-content {
        transform: scale(1);
    }
</style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center p-2">

<div id="game-container" class="relative w-full h-full bg-gray-800 rounded-2xl shadow-lg p-4 flex flex-col justify-between">

    <div class="text-center mb-2">
        <h1 class="text-2xl sm:text-3xl font-extrabold text-amber-400">Papyonu Bulma Oyunu</h1>
        <p class="text-xs text-gray-400 mt-1">Doğru papyonu bulmak için butonlara tıkla!</p>
    </div>

    <div id="button-grid" class="flex-grow">
        <!-- Butonlar buraya eklenecek -->
    </div>

    <div id="win-message" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-20">
        <div class="bg-green-500 text-white text-center text-2xl sm:text-3xl font-extrabold p-6 rounded-xl shadow-2xl">
            Kazandın! Doğru Papyonu Buldun!
            <div class="flex justify-center mt-4">
                <a href="https://seninlinkin.com" id="win-link" target="_blank"
                   class="px-4 py-2 bg-white text-green-600 font-bold rounded-full text-lg hover:bg-gray-200">
                   Linki Aç
                </a>
            </div>
        </div>
    </div>
</div>

<script>
window.onload = function() {
    const buttonGrid = document.getElementById('button-grid');
    const winMessage = document.getElementById('win-message');

    const totalButtons = 4;
    const hiddenImageUrl = 'https://placehold.co/200x200/38bdf8/ffffff?text=Gizli';
    const correctImageUrl = 'https://placehold.co/200x200/4CAF50/ffffff?text=Doğru+Papyon';

    const wrongImageUrls = [
        'https://placehold.co/200x200/A00000/ffffff?text=Yanlış-1',
        'https://placehold.co/200x200/D00000/ffffff?text=Yanlış-2',
        'https://placehold.co/200x200/E00000/ffffff?text=Yanlış-3',
        'https://placehold.co/200x200/F00000/ffffff?text=Yanlış-4'
    ];

    const buttonColors = ['bg-red-500', 'bg-blue-500', 'bg-green-500', 'bg-purple-500'];

    let isGameOver = false;
    let isAnimating = false;
    let clickCount = 0;

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function shufflePositions() {
        const buttons = Array.from(buttonGrid.children);
        const initialPositions = buttons.map(b => b.getBoundingClientRect());

        const shuffled = [...buttons];
        shuffleArray(shuffled);
        shuffled.forEach(btn => buttonGrid.appendChild(btn));

        const finalPositions = buttons.map(b => b.getBoundingClientRect());

        buttons.forEach((button, index) => {
            const dx = initialPositions[index].left - finalPositions[index].left;
            const dy = initialPositions[index].top - finalPositions[index].top;

            button.style.transition = 'none';
            button.style.transform = `translate(${dx}px, ${dy}px)`;

            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    button.style.transition = 'transform 0.2s ease-in-out';
                    button.style.transform = '';
                });
            });
        });
    }

    function createButtons() {
        buttonGrid.innerHTML = '';
        for (let i = 0; i < totalButtons; i++) {
            const button = document.createElement('button');
            button.classList.add(
                'game-button', buttonColors[i % buttonColors.length],
                'text-4xl', 'font-bold', 'text-white', 'p-2', 'rounded-xl',
                'aspect-square', 'w-full'
            );

            const hiddenImage = document.createElement('img');
            hiddenImage.src = hiddenImageUrl;
            hiddenImage.classList.add('button-content', 'revealed-content');

            const revealedImage = document.createElement('img');
            revealedImage.src = wrongImageUrls[i % wrongImageUrls.length];
            revealedImage.classList.add('button-content', 'hidden-content');

            button.appendChild(hiddenImage);
            button.appendChild(revealedImage);
            buttonGrid.appendChild(button);
        }
    }

    function revealButton(button, imageUrl, isCorrect) {
        const hiddenImage = button.querySelector('.button-content.revealed-content');
        const revealedImage = button.querySelector('.button-content.hidden-content');

        revealedImage.src = imageUrl;
        revealedImage.classList.remove('hidden-content');
        hiddenImage.classList.add('hidden-content');

        if (isCorrect) {
            winMessage.classList.remove('hidden');
            isGameOver = true;
            isAnimating = false;
        } else {
            setTimeout(() => {
                revealedImage.classList.add('hidden-content');
                hiddenImage.classList.remove('hidden-content');
                isAnimating = false;
                if (!isGameOver) shufflePositions();
            }, 500);
        }
    }

    buttonGrid.addEventListener('click', (event) => {
        if (isGameOver || isAnimating) return;
        const clickedButton = event.target.closest('button');
        if (!clickedButton) return;

        isAnimating = true;
        clickCount++;

        if (clickCount === 49) {
            revealButton(clickedButton, correctImageUrl, true);
        } else {
            const wrongImage = wrongImageUrls[Math.floor(Math.random() * wrongImageUrls.length)];
            revealButton(clickedButton, wrongImage, false);
        }
    });

    createButtons();
};
</script>

</body>
</html>
